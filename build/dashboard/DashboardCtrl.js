define(["dashboard/module","lodash"],function(a,b){"use strict";a.registerController("DashboardCtrl",["$scope","$interval","CalendarEvent",function(a,c,d){function e(a,c){var d=Math.min(100,c+5),e=Math.abs(c-5);return[a,b.random(e,d,!0)]}function f(){return b(b.range(199)).reduce(function(a,c){return a.push(e(c+1,b.last(a)[1])),a},[[0,50]])}function g(c,d){d?-1==a.revenewData.indexOf(c)&&a.revenewData.push(c):a.revenewData=b.without(a.revenewData,c)}a.autoUpdate=!1;var h;a.$watch("autoUpdate",function(d){d?h=c(function(){var c=b.rest(a.liveStats[0]).map(function(a,b){return a[0]=b,a});c.push([199,b.last(c)[1]]),a.liveStats=[c]},1500):c.cancel(h)}),a.liveStats=[f()],a.liveStatsOptions={yaxis:{min:0,max:100},xaxis:{min:0,max:100},colors:["rgb(87, 136, 156)"],series:{lines:{lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.4},{opacity:0}]},steps:!1}}};var i=[[1,27],[2,34],[3,51],[4,48],[5,55],[6,65],[7,61],[8,70],[9,65],[10,75],[11,57],[12,59],[13,62]],j=[[1,25],[2,31],[3,45],[4,37],[5,38],[6,40],[7,47],[8,55],[9,43],[10,50],[11,47],[12,39],[13,47]];a.statsData=[{label:"Twitter",data:i,lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.1},{opacity:.13}]}},points:{show:!0}},{label:"Facebook",data:j,lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.1},{opacity:.13}]}},points:{show:!0}}],a.statsDisplayOptions={grid:{hoverable:!0},colors:["#568A89","#3276B1"],tooltip:!0,tooltipOpts:{defaultTheme:!1},xaxis:{ticks:[[1,"JAN"],[2,"FEB"],[3,"MAR"],[4,"APR"],[5,"MAY"],[6,"JUN"],[7,"JUL"],[8,"AUG"],[9,"SEP"],[10,"OCT"],[11,"NOV"],[12,"DEC"],[13,"JAN+1"]]},yaxes:{}};var k=[[1354586e6,153],[1364587e6,658],[1374588e6,198],[1384589e6,663],[139459e7,801],[1404591e6,1080],[1414592e6,353],[1424593e6,749],[1434594e6,523],[1444595e6,258],[1454596e6,688],[1464597e6,364]],l=[[1354586e6,53],[1364587e6,65],[1374588e6,98],[1384589e6,83],[139459e7,980],[1404591e6,808],[1414592e6,720],[1424593e6,674],[1434594e6,23],[1444595e6,79],[1454596e6,88],[1464597e6,36]],m=[[1354586e6,647],[1364587e6,435],[1374588e6,784],[1384589e6,346],[139459e7,487],[1404591e6,463],[1414592e6,479],[1424593e6,236],[1434594e6,843],[1444595e6,657],[1454596e6,241],[1464597e6,341]],n={label:"Target Profit",data:k,bars:{show:!0,align:"center",barWidth:432e7}};a.targetsShow=!0,a.$watch("targetsShow",function(a){g(n,a)});var o={label:"Actual Profit",data:l,color:"#3276B1",lines:{show:!0,lineWidth:3},points:{show:!0}};a.actualsShow=!0,a.$watch("actualsShow",function(a){g(o,a)});var p={label:"Actual Signups",data:m,color:"#71843F",lines:{show:!0,lineWidth:1},points:{show:!0}};a.signupsShow=!0,a.$watch("signupsShow",function(a){g(p,a)}),a.revenewData=[n,o,p],a.revenewDisplayOptions={grid:{hoverable:!0},tooltip:!0,tooltipOpts:{defaultTheme:!1},xaxis:{mode:"time"},yaxes:{tickFormatter:function(a){return"$"+a},max:1200}},a.countriesVisitsData={US:4977,AU:4873,IN:3671,BR:2476,TR:1476,CN:146,CA:134,BD:100},a.events=[],d.query().$promise.then(function(b){a.events=b})}])});
